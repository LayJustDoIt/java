
-- The DDL (Data Definition Language) statements in this file must be tailored to the target environment.
-- Do this by changing three variables:

-- One Owner variable:
--  >> Change the '#OWNERID#'  variable to the schema which should own the objects (this variable exists only in qualified DDL).

-- Two Tablespace variables:
--  >> Change the 'TS_HPSC_DATA' variable to the physical tablespace name.
--  >> Change the 'TS_HPSC_INDX' variable to the physical indexspace name.


-- ALTER SESSION SET nls_length_semantics=char;

-- Drop Sequence If Exists
SET MODE ORACLE;

DROP SEQUENCE IF EXISTS SEQ_NOTIF_MSG_KY;

-- Drop Table If Exists


DROP TABLE IF EXISTS LL_NOTIF_MSG_TEMPL CASCADE;

DROP TABLE IF EXISTS APP_NOTIF_MSG CASCADE;

DROP TABLE IF EXISTS APP CASCADE;

DROP TABLE IF EXISTS EMAIL_NOTIF_MSG_DTL CASCADE;

DROP TABLE IF EXISTS NOTIF_MSG CASCADE;

DROP TABLE IF EXISTS NOTIF_MSG_COMM_TYPE CASCADE;

DROP TABLE IF EXISTS NOTIF_MSG_STAT CASCADE;


CREATE SEQUENCE SEQ_NOTIF_MSG_KY
	INCREMENT BY 1
	START WITH 1;

CREATE TABLE APP
(
	APP_ID               VARCHAR2(20) NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	CRT_AUTH_USER_ID     VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_AUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	CRT_AUTH_USER_TS     TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LMAUTH_USER_ID       VARCHAR2(140) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TS    TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	APP_NM               VARCHAR2(60) DEFAULT  ' '  NOT NULL ,
	APP_DN               VARCHAR2(255) DEFAULT  ' '  NOT NULL 
)
;

CREATE UNIQUE INDEX PK_APP ON APP
(APP_ID   ASC);

ALTER TABLE APP
	ADD CONSTRAINT  PK_APP PRIMARY KEY (APP_ID);

CREATE TABLE APP_NOTIF_MSG
(
	APP_ID               VARCHAR2(20) NOT NULL ,
	APP_NOTIF_MSG_ID     VARCHAR2(20) NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	CRT_AUTH_USER_ID     VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_AUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	CRT_AUTH_USER_TS     TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LMAUTH_USER_ID       VARCHAR2(140) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TS    TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	APP_NOTIF_MSG_NM     VARCHAR2(60) DEFAULT  ' '  NOT NULL ,
	APP_NOTIF_MSG_DN     VARCHAR2(255) DEFAULT  ' '  NOT NULL 
);

CREATE UNIQUE INDEX PK_APP_NOTIF_MSG ON APP_NOTIF_MSG
(APP_ID   ASC,APP_NOTIF_MSG_ID   ASC);

ALTER TABLE APP_NOTIF_MSG
	ADD CONSTRAINT  PK_APP_NOTIF_MSG PRIMARY KEY (APP_ID,APP_NOTIF_MSG_ID);

CREATE TABLE EMAIL_NOTIF_MSG_DTL
(
	NOTIF_MSG_KY         INTEGER DEFAULT  0  NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	CRT_AUTH_USER_ID     VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_AUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	CRT_AUTH_USER_TS     TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LMAUTH_USER_ID       VARCHAR2(140) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TS    TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	EMAIL_SND_ADDR_TX    VARCHAR2(255) DEFAULT  ' '  NOT NULL ,
	EMAIL_RCPNT_ADDR_LST CLOB DEFAULT  ' '  NOT NULL ,
	EMAIL_SENT_IN_GRP_FG SMALLINT DEFAULT  0  NOT NULL ,
	EMAIL_REPLY_TO_ADDR_TX VARCHAR2(255) DEFAULT  ' '  NULL ,
	EMAIL_SUBJ_LN_TX     VARCHAR2(255) DEFAULT  ' '  NOT NULL ,
	EMAIL_BODY_TX        CLOB DEFAULT  ' '  NOT NULL 
);

CREATE UNIQUE INDEX PK_EMAIL_NOTIF_MSG_DTL ON EMAIL_NOTIF_MSG_DTL
(NOTIF_MSG_KY   ASC);

ALTER TABLE EMAIL_NOTIF_MSG_DTL
	ADD CONSTRAINT  PK_EMAIL_NOTIF_MSG_DTL PRIMARY KEY (NOTIF_MSG_KY);

CREATE TABLE LL_NOTIF_MSG_TEMPL
(
	APP_ID               VARCHAR2(20) NOT NULL ,
	APP_NOTIF_MSG_ID     VARCHAR2(20) NOT NULL ,
	LCLE_CD              VARCHAR2(5) NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	CRT_AUTH_USER_ID     VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_AUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	CRT_AUTH_USER_TS     TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LMAUTH_USER_ID       VARCHAR2(140) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TS    TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LL_NOTIF_MSG_TEMPL_NM VARCHAR2(60) DEFAULT  ' '  NOT NULL ,
	LL_NOTIF_MSG_TEMPL_DN VARCHAR2(255) DEFAULT  ' '  NOT NULL ,
	LL_NOTIF_MSG_SUBJ_LN_TX VARCHAR2(255) DEFAULT  ' '  NOT NULL ,
	LL_NOTIF_MSG_TEMPL_BODY_TX CLOB DEFAULT  ' '  NOT NULL 
);

CREATE UNIQUE INDEX PK_LL_NOTIF_MSG_TEMPL ON LL_NOTIF_MSG_TEMPL
(APP_ID   ASC,APP_NOTIF_MSG_ID   ASC,LCLE_CD   ASC);

ALTER TABLE LL_NOTIF_MSG_TEMPL
	ADD CONSTRAINT  PK_LL_NOTIF_MSG_TEMPL PRIMARY KEY (APP_ID,APP_NOTIF_MSG_ID,LCLE_CD);

CREATE TABLE NOTIF_MSG
(
	NOTIF_MSG_KY         INTEGER DEFAULT SEQ_NOTIF_MSG_KY.NEXTVAL NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	CRT_AUTH_USER_ID     VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_AUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	CRT_AUTH_USER_TS     TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LMAUTH_USER_ID       VARCHAR2(140) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	LMAUTH_USER_ID_TS    TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	NOTIF_MSG_COMM_TYPE_CD VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	NOTIF_MSG_STAT_CD    VARCHAR2(10) DEFAULT  ' '  NOT NULL ,
	NOTIF_MSG_ATMPT_TO_SND_CT INTEGER DEFAULT  0  NOT NULL 
);

CREATE UNIQUE INDEX PK_NOTIF_MSG ON NOTIF_MSG
(NOTIF_MSG_KY   ASC);

ALTER TABLE NOTIF_MSG
	ADD CONSTRAINT  PK_NOTIF_MSG PRIMARY KEY (NOTIF_MSG_KY);

CREATE TABLE NOTIF_MSG_COMM_TYPE
(
	NOTIF_MSG_COMM_TYPE_CD VARCHAR2(10) NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	NOTIF_MSG_COMM_TYPE_NM VARCHAR2(60) DEFAULT  ' '  NOT NULL ,
	NOTIF_MSG_COMM_TYPE_DN VARCHAR2(255) DEFAULT  ' '  NOT NULL 
);

CREATE UNIQUE INDEX PK_NOTIF_MSG_COMM_TYPE ON NOTIF_MSG_COMM_TYPE
(NOTIF_MSG_COMM_TYPE_CD   ASC);

ALTER TABLE NOTIF_MSG_COMM_TYPE
	ADD CONSTRAINT  PK_NOTIF_MSG_COMM_TYPE PRIMARY KEY (NOTIF_MSG_COMM_TYPE_CD);

CREATE TABLE NOTIF_MSG_STAT
(
	NOTIF_MSG_STAT_CD    VARCHAR2(10) NOT NULL ,
	CRT_USER_ID          VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	CRT_TS               TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	LAST_MAINT_USER_ID   VARCHAR2(140) DEFAULT  'USER'  NOT NULL ,
	LAST_MAINT_TS        TIMESTAMP DEFAULT  SYSTIMESTAMP  NOT NULL ,
	NOTIF_MSG_STAT_NM    VARCHAR2(60) DEFAULT  ' '  NOT NULL ,
	NOTIF_MSG_STAT_DN    VARCHAR2(255) DEFAULT  ' '  NOT NULL 
);

CREATE UNIQUE INDEX PK_NOTIF_MSG_STAT ON NOTIF_MSG_STAT
(NOTIF_MSG_STAT_CD   ASC);

ALTER TABLE NOTIF_MSG_STAT
	ADD CONSTRAINT  PK_NOTIF_MSG_STAT PRIMARY KEY (NOTIF_MSG_STAT_CD);


--CREATE  TRIGGER TRG_INS_NOTIF_MSG
--  BEFORE INSERT
--  ON NOTIF_MSG
--  
--  FOR EACH ROW 
--  
--/* ERwin Builtin Trigger */
--/* default body for TRG_INS_NOTIF_MSG */
--
--SELECT SEQ_NOTIF_MSG_KY.NEXTVAL INTO :NEW.NOTIF_MSG_KY FROM DUAL;




